<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
        "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
        "https://checkstyle.org/dtds/configuration_1_3.dtd">

<!--
    프로젝트 코딩 컨벤션 기반 Checkstyle 설정

    네이밍 규칙:
    - 클래스명: PascalCase
    - 변수/메서드명: camelCase
    - 상수: UPPER_CASE
    - boolean: is, has prefix (entity 제외)
    - 변수명 축약 금지
-->

<module name="Checker">
    <!-- 파일 인코딩 UTF-8 -->
    <property name="charset" value="UTF-8"/>

    <!-- 심각도 기본값 -->
    <property name="severity" value="warning"/>

    <!-- 파일 확장자 -->
    <property name="fileExtensions" value="java"/>

    <!-- ============================================ -->
    <!-- 파일 수준 검사                                -->
    <!-- ============================================ -->

    <!-- 파일 길이 제한 (최대 500줄) -->
    <module name="FileLength">
        <property name="max" value="500"/>
        <property name="fileExtensions" value="java"/>
    </module>

    <!-- 탭 문자 금지 (공백 사용) -->
    <module name="FileTabCharacter">
        <property name="eachLine" value="true"/>
    </module>

    <!-- ============================================ -->
    <!-- TreeWalker: 코드 수준 검사                    -->
    <!-- ============================================ -->
    <module name="TreeWalker">

        <!-- ========================================== -->
        <!-- 네이밍 규칙 (Naming Conventions)            -->
        <!-- ========================================== -->

        <!-- 클래스명: PascalCase -->
        <module name="TypeName">
            <property name="format" value="^[A-Z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="클래스명은 PascalCase를 사용해야 합니다: ''{0}''"/>
        </module>

        <!-- 메서드명: camelCase -->
        <module name="MethodName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="메서드명은 camelCase를 사용해야 합니다: ''{0}''"/>
        </module>

        <!-- 일반 변수명: camelCase -->
        <module name="MemberName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="멤버 변수명은 camelCase를 사용해야 합니다: ''{0}''"/>
        </module>

        <!-- 로컬 변수명: camelCase -->
        <module name="LocalVariableName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="로컬 변수명은 camelCase를 사용해야 합니다: ''{0}''"/>
        </module>

        <!-- 파라미터명: camelCase -->
        <module name="ParameterName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="파라미터명은 camelCase를 사용해야 합니다: ''{0}''"/>
        </module>

        <!-- 상수명: UPPER_CASE -->
        <module name="ConstantName">
            <property name="format" value="^[A-Z][A-Z0-9]*(_[A-Z0-9]+)*$"/>
            <message key="name.invalidPattern"
                     value="상수명은 UPPER_CASE를 사용해야 합니다: ''{0}''"/>
        </module>

        <!-- 패키지명: 소문자만 -->
        <module name="PackageName">
            <property name="format" value="^[a-z]+(\.[a-z][a-z0-9]*)*$"/>
            <message key="name.invalidPattern"
                     value="패키지명은 소문자만 사용해야 합니다: ''{0}''"/>
        </module>

        <!-- ========================================== -->
        <!-- 변수명 길이 검사 (축약 방지)                 -->
        <!-- ========================================== -->

        <!-- 멤버 변수명 최소 길이 (축약 방지) -->
        <module name="MemberName">
            <property name="format" value="^[a-z][a-zA-Z0-9]{2,}$"/>
            <message key="name.invalidPattern"
                     value="변수명은 최소 3자 이상이어야 합니다 (축약 금지): ''{0}''"/>
        </module>

        <!-- 로컬 변수명 최소 길이 (루프 변수 제외) -->
        <module name="LocalVariableName">
            <property name="format" value="^[a-z][a-zA-Z0-9]{1,}$"/>
            <property name="allowOneCharVarInForLoop" value="true"/>
            <message key="name.invalidPattern"
                     value="변수명은 최소 2자 이상이어야 합니다 (i, j 등 루프 변수 제외): ''{0}''"/>
        </module>

        <!-- ========================================== -->
        <!-- 코드 구조 검사                              -->
        <!-- ========================================== -->

        <!-- 메서드 길이 제한 (최대 150줄) -->
        <module name="MethodLength">
            <property name="max" value="150"/>
            <property name="tokens" value="METHOD_DEF"/>
            <message key="maxLen.method"
                     value="메서드는 {0,number,integer}줄을 초과할 수 없습니다 (현재: {1,number,integer}줄)"/>
        </module>

        <!-- 파라미터 개수 제한 (최대 7개) -->
        <module name="ParameterNumber">
            <property name="max" value="7"/>
            <property name="tokens" value="METHOD_DEF"/>
            <message key="maxParam"
                     value="메서드 파라미터는 {0,number,integer}개를 초과할 수 없습니다"/>
        </module>

        <!-- 라인 길이 제한 (최대 120자) -->
        <module name="LineLength">
            <property name="max" value="120"/>
            <property name="ignorePattern" value="^package.*|^import.*|a href|href|http://|https://|ftp://"/>
            <message key="maxLineLen"
                     value="라인은 {0,number,integer}자를 초과할 수 없습니다 (현재: {1,number,integer}자)"/>
        </module>

        <!-- ========================================== -->
        <!-- Import 규칙                                -->
        <!-- ========================================== -->

        <!-- 사용하지 않는 import 금지 -->
        <module name="UnusedImports">
            <message key="import.unused"
                     value="사용하지 않는 import문입니다: {0}"/>
        </module>

        <!-- 중복 import 금지 -->
        <module name="RedundantImport">
            <message key="import.redundant"
                     value="중복된 import문입니다: {0}"/>
        </module>

        <!-- 와일드카드 import 금지 (java.*, javax.* 제외) -->
        <module name="AvoidStarImport">
            <property name="excludes" value="java.io,java.util,java.net,javax.annotation"/>
            <message key="import.avoidStar"
                     value="와일드카드(*) import는 피해주세요: {0}"/>
        </module>

        <!-- java.lang 패키지 import 불필요 -->
        <module name="IllegalImport">
            <property name="illegalPkgs" value="sun, com.sun"/>
            <message key="import.illegal"
                     value="허용되지 않는 패키지 import입니다: {0}"/>
        </module>

        <!-- ========================================== -->
        <!-- 공백 규칙 (Whitespace)                     -->
        <!-- ========================================== -->

        <!-- 메서드 이름과 괄호 사이 공백 없음 -->
        <module name="MethodParamPad"/>

        <!-- 타입 캐스트 후 공백 -->
        <module name="TypecastParenPad"/>

        <!-- 연산자 주변 공백 -->
        <module name="WhitespaceAround">
            <property name="tokens" value="ASSIGN, BAND, BAND_ASSIGN, BOR,
                BOR_ASSIGN, BSR, BSR_ASSIGN, BXOR, BXOR_ASSIGN, COLON, DIV,
                DIV_ASSIGN, EQUAL, GE, GT, LAND, LE, LITERAL_CATCH,
                LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY, LITERAL_FOR,
                LITERAL_IF, LITERAL_RETURN, LITERAL_SYNCHRONIZED,
                LITERAL_TRY, LITERAL_WHILE, LOR, LT, MINUS, MINUS_ASSIGN,
                MOD, MOD_ASSIGN, NOT_EQUAL, PLUS, PLUS_ASSIGN, QUESTION,
                SL, SL_ASSIGN, SR, SR_ASSIGN, STAR, STAR_ASSIGN"/>
        </module>

        <!-- 괄호 내부 공백 없음 -->
        <module name="ParenPad"/>

        <!-- ========================================== -->
        <!-- 들여쓰기 (Indentation)                     -->
        <!-- ========================================== -->

        <!-- 기본 들여쓰기 4칸 (Spotless와 일치) -->
        <module name="Indentation">
            <property name="basicOffset" value="4"/>
            <property name="braceAdjustment" value="0"/>
            <property name="caseIndent" value="4"/>
            <property name="throwsIndent" value="4"/>
            <property name="lineWrappingIndentation" value="4"/>
            <property name="arrayInitIndent" value="4"/>
        </module>

        <!-- ========================================== -->
        <!-- 중괄호 규칙 (Braces)                       -->
        <!-- ========================================== -->

        <!-- if, else, for, while 등에 중괄호 필수 -->
        <module name="NeedBraces">
            <property name="tokens" value="LITERAL_IF, LITERAL_ELSE, LITERAL_FOR, LITERAL_WHILE, LITERAL_DO"/>
            <message key="needBraces"
                     value="{0} 문에는 중괄호가 필요합니다"/>
        </module>

        <!-- 왼쪽 중괄호 위치 (같은 줄) -->
        <module name="LeftCurly">
            <property name="option" value="eol"/>
        </module>

        <!-- 오른쪽 중괄호 위치 -->
        <module name="RightCurly">
            <property name="option" value="same"/>
            <property name="tokens" value="LITERAL_TRY, LITERAL_CATCH, LITERAL_FINALLY, LITERAL_IF, LITERAL_ELSE"/>
        </module>

        <!-- ========================================== -->
        <!-- 기타 코드 품질 검사                         -->
        <!-- ========================================== -->

        <!-- 빈 블록 검사 -->
        <module name="EmptyBlock">
            <property name="option" value="text"/>
            <property name="tokens" value="LITERAL_CATCH, LITERAL_FINALLY, LITERAL_IF, LITERAL_ELSE, LITERAL_SWITCH"/>
        </module>

        <!-- 불필요한 괄호 제거 -->
        <module name="UnnecessaryParentheses"/>

        <!-- 한 줄에 하나의 statement만 -->
        <module name="OneStatementPerLine"/>

        <!-- 여러 변수 선언 금지 (int a, b, c; 금지) -->
        <module name="MultipleVariableDeclarations"/>

        <!-- 배열 타입 스타일 (String[] args, not String args[]) -->
        <module name="ArrayTypeStyle"/>

        <!-- 수정자 순서 (public static final 등) -->
        <module name="ModifierOrder"/>

        <!-- switch문에 default 필수 -->
        <module name="MissingSwitchDefault"/>

        <!-- fall-through 방지 (break 필수) -->
        <module name="FallThrough"/>

        <!-- ========================================== -->
        <!-- Annotation 규칙                            -->
        <!-- ========================================== -->

        <!-- Annotation 위치 (독립된 줄) -->
        <module name="AnnotationLocation">
            <property name="tokens" value="CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF, CTOR_DEF"/>
            <property name="allowSamelineMultipleAnnotations" value="false"/>
        </module>

        <!-- ========================================== -->
        <!-- 특수 규칙                                  -->
        <!-- ========================================== -->

        <!-- equals() 오버라이드 시 hashCode()도 필수 -->
        <module name="EqualsHashCode"/>

        <!-- String 비교 시 리터럴이 왼쪽 ("text".equals(str)) -->
        <module name="EqualsAvoidNull"/>

        <!-- 불필요한 세미콜론 제거 -->
        <module name="UnnecessarySemicolonAfterTypeMemberDeclaration"/>
        <module name="UnnecessarySemicolonInEnumeration"/>

    </module>
</module>